<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bomberman Client</title>

    <link rel="stylesheet" href="css/game.css">


    <script src="js/socket.io.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const socket = io();

        console.log(socket);

        socket.on('connect', () => {
          console.log('Connecté au serveur');
          bouger('gauche');
        });

        // Listen to messages from the server
        socket.on('message', (data) => {
          console.log(data);
        });

        // Function to send a movement
        function bouger(direction) {
          socket.emit('game', { type: 'bouger', direction });
        }

        // Function to place a bomb
        function poserBombe() {
          socket.emit('game', { type: 'poserBombe' });
        }

        const character = document.getElementById('character');

        // Center of the page
        let positionX = window.innerWidth / 2;
        let positionY = window.innerHeight / 2;

        socket.on('game', (data) => {
          console.log(data);
          switch (data.type) {
            case 'bouger':
              switch (data.direction) {
                case 'gauche':
                  positionX -= 5;
                  character.style.transform = 'scaleX(-1)';
                  break;
                case 'droite':
                  positionX += 5;
                  character.style.transform = 'scaleX(1)';
                  break;
                case 'haut':
                  positionY -= 5;
                  character.style.transform = 'scaleY(-1)';
                  break;
                case 'bas':
                  positionY += 5;
                  character.style.transform = 'scaleY(1)';
                  break;
              }
              break;
            case 'poserBombe':
              console.log('Bombe posée');
              break;
          }
          character.style.left = `${positionX}px`;
          character.style.top = `${positionY}px`;
        });
      });
    </script>
</head>
<body>
<div id="landscape">
    <div id="character"></div>
</div>
</body>
</html>
